---
layout: post
title: 不可变性和哈希性
categories: 编程语言
comments: false
description: 
keywords: python
mathjax: true
---

### 和不可改变性imutable

可变对象和不可变对象。所谓**可变对象是指，对象的内容是可变的**，例如 list。而不可变的对象则相反，表示其内容不可变。当一个变量（不是整体赋值)赋新值的时候，id改变，说明指向改变，间接说明对象是不可变的。


- 不可变对象：int，string，float，tuple，类
- 可变对象 ：list，dictionary 【无法hash】

不可变的对象的特征没有变，依然是不可变对象，变的只是创建了新对象，改变了变量的对象引用，指向新的不可变对象【id改变】。


> 1.**Python不允许程序员选择采用传值还是传引用。**Python参数传递采用的肯定是“传对象引用”的方式。实际上，这种方式相当于传值和传引用的一种综合。如果函数收到的是一个**可变对象**（比如字典或者列表）的引用，就能修改对象的原始值——相当于通过“传引用”来传递对象。如果函数收到的是一个**不可变对象**（比如数字、字符或者元组）的引用，就不能直接修改原始对象——相当于通过“传值”来传递对象。
> 
> 2.当人们复制列表或字典时，就复制了对象列表的引用同，如果改变引用的值，则修改了原始的参数。
> 
> 3.为了简化内存管理，Python通过**引用计数** 机制实现自动垃圾回收功能，Python中的每个对象都有一个引用计数，用来计数该对象在不同场所分别被引用了多少次。每当引用一次Python对象，相应的引用计数就增1，每当消毁一次Python对象，则相应的引用就减1，**只有当引用计数为零时，才真正从内存中删除Python对象。**

#### 哈希性hashable
如果一个对象在自己的生命周期中有一哈希值（hash value）是不可改变的，那么它就是可哈希的（hashable）的

两者相联系是因为哈希键值一定是不可改变的，所以它们对应的哈希键值也不改变。如果允许它们改变，，那么它们在数据结构如哈希表中的存储位置也会改变，因此会与哈希的概念违背，效率会大打折扣。

可以看出**列表,字典是无法哈希的**,因为他们在改变值的同时却没有改变id,无法由地址定位值的唯一性,因而无法哈希.